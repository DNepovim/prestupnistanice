---
import PageTitle from "../../components/PageTitle.astro";
import Layout from "../../layouts/Layout.astro";
import { client } from "../../../tina/__generated__/client.ts";
import BooksList from "../../components/BooksList.astro";
import { isDefined } from "../../utils/isDefined";

const books = (
  (await client.queries.booksConnection({ sort: "date" })).data.booksConnection
    .edges ?? []
)
  .map((item) => item?.node)
  .filter(isDefined)
  .reverse();
---

<Layout siteTitle="Naše knihy">
  <PageTitle>Naše knihy</PageTitle>
  <BooksList books={books} />
</Layout>
